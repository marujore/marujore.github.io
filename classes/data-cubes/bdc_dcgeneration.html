

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Data cubes generation &mdash; Rennan Marujo</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  
    <link rel="canonical" href="https://rennan-marujo.github.io/classes/data-cubes/bdc_dcgeneration.html"/>
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Accessing BDC" href="accessing-bdc.html" />
    <link rel="prev" title="BDC Tiling System" href="bdc_tilling.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >
          

          
            <a href="../../index.html" class="icon icon-home"> Rennan Marujo
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Rennan Marujo</a></li>
</ul>
<p class="caption"><span class="caption-text">General Information:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general-info/general-info.html">General Information</a></li>
</ul>
<p class="caption"><span class="caption-text">Classes:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../classes.html">Classes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../radiometric-correction/intro.html">Radiometric Correction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="intro.html">Data Cubes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="marujo_thesis.html">Marujo’s Thesis and Gap-filling</a></li>
<li class="toctree-l3"><a class="reference internal" href="initiatives.html">Data Cube Initiatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="bdc.html">Brazil Data Cube</a></li>
<li class="toctree-l3"><a class="reference internal" href="bdc_concepts.html">BDC Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="bdc_data_acq.html">BDC Data acquisition and ARD processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="bdc_tilling.html">BDC Tiling System</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Data cubes generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="accessing-bdc.html">Accessing BDC</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro.html#references">Referênces</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Publications:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../publications/publications.html">Publications</a></li>
</ul>
<p class="caption"><span class="caption-text">Repositories:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../repositories/repositories.html">Repositories</a></li>
</ul>
<p class="caption"><span class="caption-text">Personal Projects:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../personal-projects/personal-projects.html">Personal Projects</a></li>
</ul>
<p class="caption"><span class="caption-text">Contact:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contact/contact.html">Contact</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Rennan Marujo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../classes.html">Classes</a> &raquo;</li>
        
          <li><a href="intro.html">Data Cubes</a> &raquo;</li>
        
      <li>Data cubes generation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="accessing-bdc.html" class="btn btn-neutral float-right" title="Accessing BDC" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="bdc_tilling.html" class="btn btn-neutral float-left" title="BDC Tiling System" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-cubes-generation">
<h1>Data cubes generation<a class="headerlink" href="#data-cubes-generation" title="Permalink to this headline">¶</a></h1>
<p>We are creating <em>identity</em> data cubes and <em>regular</em> data cubes. Currently, each data cube contains images from a single sensor. An identity data cube uses all available images in a period of time, tiled to a common grid. We call it <em>identity</em> because, in its generation, the temporal composition maintains the date of acquisition, and the cubes are irregular in the time dimension.</p>
<p>Other functions for temporal composing can generate regular, in the time dimension, data cubes. This is performed by reducing the time dimension to a longer unit (e.g. a month or 16 days), generating observations that are regularly spaced in time generating the regular data cubes.</p>
<p>This process to generate the data cubes illustrated in <a class="reference internal" href="#fig-bdc-cube-builder"><span class="std std-numref">Figure 22</span></a>, it is composed of two steps: <em>warping</em>, and <em>temporal composing</em>. The warping process generates the identity data cubes; the input images are resampled to the same spatial resolution using a bilinear function for all bands and nearest neighbor for cloud masks; the images are re-projected to the common projection, and images sensing in the same day are merged into one mosaic; finally, the mosaic is cropped into the grid tile extension.</p>
<div class="align-center figure align-default" id="fig-bdc-cube-builder">
<a class="reference internal image-reference" href="../../_images/cube_builder.png"><img alt="BDC Cube Builder" src="../../_images/cube_builder.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Figure 22 - </span><span class="caption-text">The process to generate a 1 month regular data cube, considering a grid tile.</span><a class="headerlink" href="#fig-bdc-cube-builder" title="Permalink to this image">¶</a></p>
</div>
<p>Regular data cubes require the definition of a regular time step (e.g., one month or 16 days) that will guide the temporal composition of multiples images available in each time step. After the warping process, the time composing function is applied to the identity data cubes. It defines the approach to select, or generate, a value representing the series of observations available during the time step. It should be noticed that temporal compositions consider only valid observations, which are not detected as cloud, cloud shadow, snow, or taking into account the quality assessment band.</p>
<p>Currently, BDC supports three functions for temporal composition: <em>median</em>, <em>average</em>, and <em>stack</em> as illustrated in <a class="reference internal" href="#fig-bdc-compositing-functions"><span class="std std-numref">Figure 23</span></a>. The median composing function consists of, given a time step, for each image band, calculate the median value of the valid observations and use it as the observation for that time step. The median function uses the central value, while keeping an existing observation, removing outliers in a given time step. The average composition uses the average of all valid observations in the time step. Is will also remove outliers, but in this case a new smoothed observation is generated.</p>
<p>The stack time composing function is the best pixel approach; it consists of ranking the time step images by the number of valid observations and selecting the observation from the better-ranked image. The stack composition ensures that observations coming from less cloud coverage have a higher probability of being selected to represent the time step.</p>
<div class="align-center figure align-default" id="fig-bdc-compositing-functions">
<a class="reference internal image-reference" href="../../_images/compositing_function.png"><img alt="BDC Cube Builder" src="../../_images/compositing_function.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Figure 23 - </span><span class="caption-text">Brazil Data Cube time composing functions (average, median and stack) applied on a pixel obtained from a monthly time step.</span><a class="headerlink" href="#fig-bdc-compositing-functions" title="Permalink to this image">¶</a></p>
</div>
<p>The image collections and data cubes are distributed as Cloud Optimized GeoTIFF (COG) files, with an internal organization that enables efficient data access in the distributed and high-performance cloud environments. In the data cubes, each GeoTIFF file contains information of a band or property of a specific tile of the BDC tiling system and of a certain time period.</p>
<p>Besides the spectral bands from original satellite images, the data cube files also contain: (1) cloud mask; (2) spectral indices (NDVI and EVI); (3) a band that indicates the total of valid observations (excluding cloud, cloud shadow, snow, or partial images) for pixel before time composing; (4) a data provenance band that indicates the image of origin of each pixel, when stack composing function is applied; (5) a thumbnail for each time step.</p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="accessing-bdc.html" class="btn btn-neutral float-right" title="Accessing BDC" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="bdc_tilling.html" class="btn btn-neutral float-left" title="BDC Tiling System" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Rennan Marujo..

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'XXXXXXXXXX', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>